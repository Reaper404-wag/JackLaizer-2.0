#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–°–∏—Å—Ç–µ–º–∞ —Å–ø–æ—Ä–æ–≤ –Ø–∫–æ–≤–∞ –î–∞–≤–∏–¥–æ–≤–∏—á–∞ –æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö
"""

import json
import random
import re
from typing import Dict, List, Optional, Tuple
from dataclasses import dataclass
from enum import Enum

class DisputePosition(Enum):
    """–ü–æ–∑–∏—Ü–∏—è –Ø–∫–æ–≤–∞ –≤ —Å–ø–æ—Ä–µ"""
    STRONGLY_AGREE = "–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–µ–Ω"
    AGREE = "—Å–æ–≥–ª–∞—Å–µ–Ω"
    NEUTRAL = "–Ω–µ–π—Ç—Ä–∞–ª–µ–Ω"
    DISAGREE = "–Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω"
    STRONGLY_DISAGREE = "–∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω"

@dataclass
class TechnicalOpinion:
    """–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –º–Ω–µ–Ω–∏–µ –Ø–∫–æ–≤–∞"""
    topic: str
    position: DisputePosition
    arguments: List[str]
    soviet_examples: List[str]
    counter_arguments: List[str]
    yakovs_emotion: str  # "—Å–ø–æ–∫–æ–π–Ω—ã–π", "–≤–æ–∑–º—É—â–µ–Ω–Ω—ã–π", "–Ω–æ—Å—Ç–∞–ª—å–≥–∏—á–µ—Å–∫–∏–π", "–ø–æ—É—á–∞—é—â–∏–π"

@dataclass
class DisputeContext:
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–ø–æ—Ä–∞"""
    user_statement: str
    topic_detected: str
    yakovs_position: DisputePosition
    argument_strength: int  # 1-5
    personal_experience: bool

class YakovsDisputeSystem:
    """–°–∏—Å—Ç–µ–º–∞ —Å–ø–æ—Ä–æ–≤ –Ø–∫–æ–≤–∞ –î–∞–≤–∏–¥–æ–≤–∏—á–∞"""
    
    def __init__(self):
        self.technical_opinions = self._load_technical_opinions()
        self.dispute_keywords = self._load_dispute_keywords()
        self.active_disputes = {}  # user_id -> DisputeContext
    
    def _load_technical_opinions(self) -> Dict[str, TechnicalOpinion]:
        """–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –º–Ω–µ–Ω–∏–π –Ø–∫–æ–≤–∞"""
        opinions = {
            "modern_frameworks": TechnicalOpinion(
                topic="—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏",
                position=DisputePosition.DISAGREE,
                arguments=[
                    "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–∑–¥—É—Ç—ã –∏ –º–µ–¥–ª–µ–Ω–Ω—ã",
                    "–í —Å–æ–≤–µ—Ç—Å–∫–æ–µ –≤—Ä–µ–º—è –ø–∏—Å–∞–ª–∏ –Ω–∞ —á–∏—Å—Ç–æ–º C –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–µ—Ç–∞–ª–∏",
                    "–ú–æ–ª–æ–¥–µ–∂—å —Ä–∞–∑—É—á–∏–ª–∞—Å—å –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º",
                    "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—ã—Å—è—á –±–∏–±–ª–∏–æ—Ç–µ–∫ - —ç—Ç–æ –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ"
                ],
                soviet_examples=[
                    "–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–æ–¥–æ–º —Ä–∞–±–æ—Ç–∞–ª–∞ 20 –ª–µ—Ç –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ —Å–±–æ—è",
                    "–ü—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –§–æ—Ä—Ç—Ä–∞–Ω–µ –±—ã–ª–∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º–∏ –∏ –±—ã—Å—Ç—Ä—ã–º–∏",
                    "–ú—ã –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ—á–∫—É –∫–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –≤—Ä—É—á–Ω—É—é"
                ],
                counter_arguments=[
                    "–ù–æ –≤–µ–¥—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —É—Å–∫–æ—Ä—è—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É!",
                    "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Å–ª–æ–∂–Ω–µ–µ",
                    "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"
                ],
                yakovs_emotion="–≤–æ–∑–º—É—â–µ–Ω–Ω—ã–π"
            ),
            
            "code_quality": TechnicalOpinion(
                topic="–∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞",
                position=DisputePosition.STRONGLY_AGREE,
                arguments=[
                    "–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ - –æ—Å–Ω–æ–≤–∞ –≤—Å–µ–≥–æ!",
                    "–õ—É—á—à–µ –Ω–∞–ø–∏—Å–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ",
                    "–ö–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ –º–µ–ª–æ—á–µ–π",
                    "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–∞–∫ —Ç–µ—Ö–ø–∞—Å–ø–æ—Ä—Ç"
                ],
                soviet_examples=[
                    "–í –ö–ë –º—ã –ø–æ —Ç—Ä–∏ —Ä–∞–∑–∞ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –∫–∞–∂–¥—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º",
                    "–ü—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –∫–æ—Å–º–æ—Å–∞ –ø–∏—Å–∞–ª–∏—Å—å —Å —Ç—Ä–æ–π–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º",
                    "–ì–û–°–¢ —Ç—Ä–µ–±–æ–≤–∞–ª –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –∫–∞–∂–¥–æ–º—É –º–æ–¥—É–ª—é"
                ],
                counter_arguments=[
                    "–ù–æ —Å–µ–π—á–∞—Å –Ω—É–∂–Ω–æ –≤—ã–ø—É—Å–∫–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ",
                    "–†—ã–Ω–æ–∫ –Ω–µ –∂–¥–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞"
                ],
                yakovs_emotion="–ø–æ—É—á–∞—é—â–∏–π"
            ),
            
            "artificial_intelligence": TechnicalOpinion(
                topic="–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç",
                position=DisputePosition.NEUTRAL,
                arguments=[
                    "–ò–ò - —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –Ω–æ –Ω–µ –ø–∞–Ω–∞—Ü–µ—è",
                    "–ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –æ–ø—ã—Ç –∏ –∏–Ω—Ç—É–∏—Ü–∏—è –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã",
                    "–ò–ò —Ö–æ—Ä–æ—à –¥–ª—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á",
                    "–ù–æ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ - –ø—Ä–µ—Ä–æ–≥–∞—Ç–∏–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞"
                ],
                soviet_examples=[
                    "–ú—ã –≤ 70-—Ö —Ç–æ–∂–µ –º–µ—á—Ç–∞–ª–∏ –æ –¥—É–º–∞—é—â–∏—Ö –º–∞—à–∏–Ω–∞—Ö",
                    "–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –±—ã–ª–∏ –ø–µ—Ä–≤—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏ –ò–ò",
                    "–ù–æ –ª—É—á—à–∏–π '–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç' - —ç—Ç–æ –æ–ø—ã—Ç–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä"
                ],
                counter_arguments=[
                    "–ò–ò —É–∂–µ –ø—Ä–µ–≤–∑–æ—à–µ–ª –ª—é–¥–µ–π –≤ —à–∞—Ö–º–∞—Ç–∞—Ö",
                    "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏"
                ],
                yakovs_emotion="—Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π"
            ),
            
            "agile_methodology": TechnicalOpinion(
                topic="agile –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏",
                position=DisputePosition.DISAGREE,
                arguments=[
                    "Agile - —ç—Ç–æ —Ö–∞–æ—Å –ø–æ–¥ –∫—Ä–∞—Å–∏–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º",
                    "–ë–µ–∑ —á–µ—Ç–∫–æ–≥–æ –ø–ª–∞–Ω–∞ –ø—Ä–æ–µ–∫—Ç –æ–±—Ä–µ—á–µ–Ω –Ω–∞ –ø—Ä–æ–≤–∞–ª",
                    "–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –≤—Ä–µ–¥—è—Ç –∫–∞—á–µ—Å—Ç–≤—É",
                    "–í–æ–¥–æ–ø–∞–¥–Ω–∞—è –º–æ–¥–µ–ª—å –Ω–∞–¥–µ–∂–Ω–µ–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–µ–µ"
                ],
                soviet_examples=[
                    "–ú—ã –≤—Å–µ–≥–¥–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞ –≥–æ–¥—ã –≤–ø–µ—Ä–µ–¥",
                    "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –±—ã–ª–æ —Å–≤—è—â–µ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º",
                    "–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–æ—Å–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–æ–º–∏—Å—Å–∏—é"
                ],
                counter_arguments=[
                    "–ù–æ –º–∏—Ä –∏–∑–º–µ–Ω–∏–ª—Å—è, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–µ–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ",
                    "–ì–∏–±–∫–æ—Å—Ç—å –ø–æ–º–æ–≥–∞–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ —Ä—ã–Ω–∫—É"
                ],
                yakovs_emotion="–≤–æ–∑–º—É—â–µ–Ω–Ω—ã–π"
            ),
            
            "open_source": TechnicalOpinion(
                topic="–æ—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–¥",
                position=DisputePosition.AGREE,
                arguments=[
                    "–û—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–¥ - —ç—Ç–æ —á–µ—Å—Ç–Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ",
                    "–ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑—É–º —Å–∏–ª—å–Ω–µ–µ –æ–¥–∏–Ω–æ—á–∫–∏",
                    "–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø–æ–≤—ã—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ",
                    "–ó–Ω–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º"
                ],
                soviet_examples=[
                    "–í –°–°–°–† –º—ã –¥–µ–ª–∏–ª–∏—Å—å –æ–ø—ã—Ç–æ–º –º–µ–∂–¥—É –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è–º–∏",
                    "–ù–∞—É—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –ø—É–±–ª–∏–∫–æ–≤–∞–ª–∏—Å—å –æ—Ç–∫—Ä—ã—Ç–æ",
                    "–ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä—É–¥ –≤—Å–µ–≥–¥–∞ –±—ã–ª –≤ –ø–æ—á–µ—Ç–µ"
                ],
                counter_arguments=[
                    "–ù–æ –∫–∞–∫ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –∫–æ–¥–µ?",
                    "–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–µ–µ"
                ],
                yakovs_emotion="—Å–ø–æ–∫–æ–π–Ω—ã–π"
            ),
            
            "cloud_computing": TechnicalOpinion(
                topic="–æ–±–ª–∞—á–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
                position=DisputePosition.DISAGREE,
                arguments=[
                    "–û–±–ª–∞–∫–∞ - —ç—Ç–æ —á—É–∂–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã, –Ω–µ –±–æ–ª–µ–µ",
                    "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞",
                    "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π",
                    "–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–µ–µ"
                ],
                soviet_examples=[
                    "–ù–∞—à–∏ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ",
                    "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –ª–æ–∫–∞–ª—å–Ω–æ",
                    "–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∑–∞–∫–ª–∞–¥—ã–≤–∞–ª–∞—Å—å –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É"
                ],
                counter_arguments=[
                    "–û–±–ª–∞–∫–∞ –¥–∞—é—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å",
                    "–ù–µ –Ω—É–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–≤–æ–∏ —Å–µ—Ä–≤–µ—Ä—ã"
                ],
                yakovs_emotion="–Ω–µ–¥–æ–≤–µ—Ä—á–∏–≤—ã–π"
            )
        }
        return opinions
    
    def _load_dispute_keywords(self) -> Dict[str, List[str]]:
        """–ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º —Å–ø–æ—Ä–æ–≤"""
        return {
            "modern_frameworks": ["—Ñ—Ä–µ–π–º–≤–æ—Ä–∫", "react", "angular", "vue", "–±–∏–±–ª–∏–æ—Ç–µ–∫", "–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç"],
            "code_quality": ["–∫–∞—á–µ—Å—Ç–≤–æ", "–∫–æ–¥", "—Ç–µ—Å—Ç", "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è", "—Å—Ç–∞–Ω–¥–∞—Ä—Ç", "–≥–æ—Å—Ç"],
            "artificial_intelligence": ["–∏–∏", "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç", "–Ω–µ–π—Ä–æ–Ω", "–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ", "chatgpt"],
            "agile_methodology": ["agile", "scrum", "—Å–ø—Ä–∏–Ω—Ç", "–∏—Ç–µ—Ä–∞—Ü–∏—è", "–≥–∏–±–∫"],
            "open_source": ["–æ—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–¥", "open source", "github", "—Å–≤–æ–±–æ–¥–Ω–æ–µ –ø–æ"],
            "cloud_computing": ["–æ–±–ª–∞–∫", "cloud", "aws", "azure", "—Å–µ—Ä–≤–µ—Ä"]
        }
    
    def detect_dispute_topic(self, user_message: str) -> Optional[str]:
        """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º—ã —Å–ø–æ—Ä–∞ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        message_lower = user_message.lower()
        
        for topic, keywords in self.dispute_keywords.items():
            for keyword in keywords:
                if keyword in message_lower:
                    return topic
        
        return None
    
    def analyze_user_statement(self, user_message: str) -> Optional[DisputeContext]:
        """–ê–Ω–∞–ª–∏–∑ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        topic = self.detect_dispute_topic(user_message)
        
        if not topic or topic not in self.technical_opinions:
            return None
        
        opinion = self.technical_opinions[topic]
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–∏–ª—É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        argument_indicators = {
            5: ["–¥–æ–∫–∞–∑–∞–Ω–æ", "–æ—á–µ–≤–∏–¥–Ω–æ", "—Ñ–∞–∫—Ç", "–Ω–∞—É—á–Ω–æ"],
            4: ["—Å—á–∏—Ç–∞—é", "—É–≤–µ—Ä–µ–Ω", "—Ç–æ—á–Ω–æ"],
            3: ["–¥—É–º–∞—é", "–ø–æ–ª–∞–≥–∞—é", "–≤–æ–∑–º–æ–∂–Ω–æ"],
            2: ["–º–æ–∂–µ—Ç –±—ã—Ç—å", "–Ω–∞–≤–µ—Ä–Ω–æ–µ"],
            1: ["–Ω–µ –∑–Ω–∞—é", "—Å–æ–º–Ω–µ–≤–∞—é—Å—å"]
        }
        
        strength = 3  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
        for level, indicators in argument_indicators.items():
            if any(indicator in user_message.lower() for indicator in indicators):
                strength = level
                break
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏—á–Ω—ã–π –æ–ø—ã—Ç
        personal_indicators = ["–æ–ø—ã—Ç", "—Ä–∞–±–æ—Ç–∞–ª", "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª", "–ø—Ä–∏–º–µ–Ω—è–ª", "–≤–∏–¥–µ–ª"]
        has_personal_experience = any(indicator in user_message.lower() for indicator in personal_indicators)
        
        return DisputeContext(
            user_statement=user_message,
            topic_detected=topic,
            yakovs_position=opinion.position,
            argument_strength=strength,
            personal_experience=has_personal_experience
        )
    
    def generate_dispute_response(self, context: DisputeContext) -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ø–∫–æ–≤–∞ –≤ —Å–ø–æ—Ä–µ"""
        if context.topic_detected not in self.technical_opinions:
            return "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞, —Ç–æ–≤–∞—Ä–∏—â, –Ω–æ —è –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —Å–ø–æ—Ä–∏—Ç—å –æ —Ç–æ–º, –≤ —á–µ–º —Ä–∞–∑–±–∏—Ä–∞—é—Å—å!"
        
        opinion = self.technical_opinions[context.topic_detected]
        
        # –í—ã–±–∏—Ä–∞–µ–º —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç–º–æ—Ü–∏–∏
        emotion_prefixes = {
            "–≤–æ–∑–º—É—â–µ–Ω–Ω—ã–π": ["üò§", "–ß—Ç–æ –∑–∞ —á–µ–ø—É—Ö–∞, —Ç–æ–≤–∞—Ä–∏—â!", "–ù—É —ç—Ç–æ —É–∂–µ —Å–ª–∏—à–∫–æ–º!"],
            "–ø–æ—É—á–∞—é—â–∏–π": ["ü§î", "–ü–æ–∑–≤–æ–ª—å—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å, –º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫...", "–ö–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è..."],
            "—Å–ø–æ–∫–æ–π–Ω—ã–π": ["üòå", "–ü–æ–Ω–∏–º–∞—é –≤–∞—à—É —Ç–æ—á–∫—É –∑—Ä–µ–Ω–∏—è, –Ω–æ...", "–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è..."],
            "—Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π": ["üí≠", "–≠—Ç–æ –≥–ª—É–±–æ–∫–∏–π –≤–æ–ø—Ä–æ—Å...", "–ñ–∏–∑–Ω—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç..."],
            "–Ω–µ–¥–æ–≤–µ—Ä—á–∏–≤—ã–π": ["ü§®", "–°–æ–º–Ω–µ–≤–∞—é—Å—å —è –≤ —ç—Ç–æ–º...", "–ù–µ –≤—Å–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ..."]
        }
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
        response_parts = []
        
        # –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è
        prefixes = emotion_prefixes.get(opinion.yakovs_emotion, ["ü§î"])
        response_parts.append(f"{random.choice(prefixes)} ")
        
        # –ü–æ–∑–∏—Ü–∏—è –Ø–∫–æ–≤–∞
        if opinion.position in [DisputePosition.DISAGREE, DisputePosition.STRONGLY_DISAGREE]:
            response_parts.append(f"–Ø {opinion.position.value} —Å –≤–∞—à–∏–º –º–Ω–µ–Ω–∏–µ–º –æ {opinion.topic}!")
        else:
            response_parts.append(f"–Ø {opinion.position.value} –ø–æ –ø–æ–≤–æ–¥—É {opinion.topic}.")
        
        response_parts.append("\n\n")
        
        # –û—Å–Ω–æ–≤–Ω–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç
        main_argument = random.choice(opinion.arguments)
        response_parts.append(f"üí¨ {main_argument}")
        response_parts.append("\n\n")
        
        # –ü—Ä–∏–º–µ—Ä –∏–∑ —Å–æ–≤–µ—Ç—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
        soviet_example = random.choice(opinion.soviet_examples)
        response_parts.append(f"üìñ {soviet_example}.")
        
        # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ª–∏—á–Ω—ã–π –æ–ø—ã—Ç, –Ø–∫–æ–≤ —ç—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç
        if context.personal_experience:
            response_parts.append(f"\n\nü§ù –ü–æ–Ω–∏–º–∞—é, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç, —Ç–æ–≤–∞—Ä–∏—â. –ù–æ –ø–æ–∑–≤–æ–ª—å—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è–º–∏...")
        
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏–ª—ã —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if context.argument_strength >= 4:
            response_parts.append(f"\n\nüéØ –í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ –æ—á–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ! –ù–æ {random.choice(opinion.arguments).lower()}")
        elif context.argument_strength <= 2:
            response_parts.append(f"\n\nüí° –†–∞–∑ —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å, —Ç–æ –æ–±—ä—è—Å–Ω—é –ø–æ–¥—Ä–æ–±–Ω–µ–µ: {random.choice(opinion.arguments).lower()}")
        
        return "".join(response_parts)
    
    def get_counter_argument(self, topic: str, user_argument: str) -> str:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç–∞ –æ—Ç –Ø–∫–æ–≤–∞"""
        if topic not in self.technical_opinions:
            return "–•–æ—Ä–æ—à–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç, —Ç–æ–≤–∞—Ä–∏—â! –ù–æ –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã..."
        
        opinion = self.technical_opinions[topic]
        
        # –Ø–∫–æ–≤ –ø—Ä–∏–∑–Ω–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –Ω–æ –æ—Ç—Å—Ç–∞–∏–≤–∞–µ—Ç —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é
        responses = [
            f"–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ, –Ω–æ {random.choice(opinion.arguments).lower()}",
            f"–î–∞, —ç—Ç–æ —Ç–∞–∫, –æ–¥–Ω–∞–∫–æ {random.choice(opinion.soviet_examples).lower()}",
            f"–°–æ–≥–ª–∞—Å–µ–Ω —á–∞—Å—Ç–∏—á–Ω–æ, –Ω–æ –æ–ø—ã—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: {random.choice(opinion.arguments).lower()}",
            f"–í—ã –ø—Ä–∞–≤—ã –≤ —ç—Ç–æ–º –º–æ–º–µ–Ω—Ç–µ, –Ω–æ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ: {random.choice(opinion.arguments).lower()}"
        ]
        
        return f"ü§î {random.choice(responses)}!"
    
    def start_dispute(self, user_id: int, user_message: str) -> Optional[str]:
        """–ù–∞—á–∞–ª–æ —Å–ø–æ—Ä–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º"""
        context = self.analyze_user_statement(user_message)
        
        if not context:
            return None
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–ø–æ—Ä–∞
        self.active_disputes[user_id] = context
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç
        response = self.generate_dispute_response(context)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–ø–æ—Ä
        response += f"\n\n‚ùì –ê —á—Ç–æ –≤—ã —Å–∫–∞–∂–µ—Ç–µ –Ω–∞ —ç—Ç–æ, —Ç–æ–≤–∞—Ä–∏—â? –ì–æ—Ç–æ–≤—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ?"
        
        return response
    
    def continue_dispute(self, user_id: int, user_message: str) -> str:
        """–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ø–æ—Ä–∞"""
        if user_id not in self.active_disputes:
            return "–û —á–µ–º —Å–ø–æ—Ä–∏–º, —Ç–æ–≤–∞—Ä–∏—â? –ù–∞—á–Ω–∏—Ç–µ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!"
        
        context = self.active_disputes[user_id]
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ö–æ—á–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫–æ–Ω—á–∏—Ç—å —Å–ø–æ—Ä
        end_keywords = ["—Å–æ–≥–ª–∞—Å–µ–Ω", "—É–±–µ–¥–∏–ª", "–ø—Ä–∞–≤", "–∑–∞–∫–æ–Ω—á–∏–º", "—Ö–≤–∞—Ç–∏—Ç"]
        if any(keyword in user_message.lower() for keyword in end_keywords):
            del self.active_disputes[user_id]
            return "üòä –í–æ—Ç –∏ —Å–ª–∞–≤–Ω–æ! –ö–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è, –≤ —Å–ø–æ—Ä–µ —Ä–æ–∂–¥–∞–µ—Ç—Å—è –∏—Å—Ç–∏–Ω–∞. –ü—Ä–∏—è—Ç–Ω–æ –±—ã–ª–æ –ø–æ–¥–∏—Å–∫—É—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –≤–∞–º–∏, —Ç–æ–≤–∞—Ä–∏—â!"
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç
        counter_response = self.get_counter_argument(context.topic_detected, user_message)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
        follow_ups = [
            "–ß—Ç–æ —Å–∫–∞–∂–µ—Ç–µ –Ω–∞ —ç—Ç–æ?",
            "–ö–∞–∫–∏–µ –±—É–¥—É—Ç –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è?",
            "–£–±–µ–¥–∏–ª –∏–ª–∏ –µ—Å—Ç—å —á—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å?",
            "–°–æ–≥–ª–∞—Å–Ω—ã –∏–ª–∏ –±—É–¥–µ—Ç–µ —Å–ø–æ—Ä–∏—Ç—å –¥–∞–ª—å—à–µ?"
        ]
        
        return f"{counter_response}\n\n‚ùì {random.choice(follow_ups)}"
    
    def get_available_topics(self) -> List[str]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–µ–º –¥–ª—è —Å–ø–æ—Ä–æ–≤"""
        return list(self.technical_opinions.keys())
    
    def get_topic_summary(self, topic: str) -> str:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –Ø–∫–æ–≤–∞ –ø–æ —Ç–µ–º–µ"""
        if topic not in self.technical_opinions:
            return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Ç–µ–º–∞"
        
        opinion = self.technical_opinions[topic]
        main_arg = opinion.arguments[0] if opinion.arguments else "–°–ª–æ–∂–Ω–∞—è —Ç–µ–º–∞"
        
        return f"{opinion.topic}: {opinion.position.value} - {main_arg}"

def main():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–ø–æ—Ä–æ–≤"""
    dispute_system = YakovsDisputeSystem()
    
    test_statements = [
        "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –æ—á–µ–Ω—å —É–¥–æ–±–Ω—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
        "React –¥–µ–ª–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ",
        "–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –Ω–µ —Ç–∞–∫ –≤–∞–∂–Ω–æ, –≥–ª–∞–≤–Ω–æ–µ —Å–∫–æ—Ä–æ—Å—Ç—å",
        "–ò–ò —Å–∫–æ—Ä–æ –∑–∞–º–µ–Ω–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤",
        "Agile –ª—É—á—à–µ –≤–æ–¥–æ–ø–∞–¥–Ω–æ–π –º–æ–¥–µ–ª–∏"
    ]
    
    print("ü•ä –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Å–ø–æ—Ä–æ–≤ –Ø–∫–æ–≤–∞ –î–∞–≤–∏–¥–æ–≤–∏—á–∞")
    print("="*50)
    
    for statement in test_statements:
        print(f"\nüë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {statement}")
        response = dispute_system.start_dispute(123, statement)
        if response:
            print(f"üë¥ –Ø–∫–æ–≤: {response[:200]}...")
        else:
            print("üë¥ –Ø–∫–æ–≤: (—Ç–µ–º–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞)")
        print("-"*50)

if __name__ == "__main__":
    main()
